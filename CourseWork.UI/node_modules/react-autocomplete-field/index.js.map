{"version":3,"file":null,"sources":["../src/Select.js","../src/TextInput.js","../src/map.js","../src/List.js","../src/ListItem.js","../src/index.js"],"sourcesContent":["import React, {Component} from 'react';\n\nclass Select extends Component {\n\n    state = {\n        items: [],\n        value: this.props.value,\n        selectedIndex: -1,\n        isAutocompleteOpen: false,\n    };\n\n    search = text => new Promise(resolve => resolve([text]));\n    getSuggestionText = item => item;\n    getSuggestionValue = item => item;\n\n    _showAC = () => this.setState({isAutocompleteOpen: true});\n    _hideAC = () => this.setState({isAutocompleteOpen: false});\n    _select = item => {\n        this.setState({value: this.getSuggestionText(item), isAutocompleteOpen: false});\n        this.props.onSelect(this.getSuggestionValue(item))\n    };\n\n    render() {\n        let {onFocus, onBlur, onChange, onKeyDown, onMouseDown, onError, onSelect, ...rest} = this.props;\n        let {items, value, selectedIndex, isAutocompleteOpen} = this.state;\n        return (\n            <div>\n                {this.renderInput({\n                    ...rest,\n                    value,\n                    onFocus: e => {\n                        this.search(e.target.value)\n                            .then(items => this.setState({items}))\n                            .catch(onError);\n                        this._showAC();\n                        onFocus(e);\n                    },\n                    onBlur: e => {\n                        this._hideAC();\n                        onBlur(e);\n                    },\n                    onChange: e => {\n                        this.setState({value: e.target.value, items: []});\n                        this.search(e.target.value)\n                            .then(items => this.setState({items}))\n                            .catch(onError);\n                        onChange(e)\n                    },\n                    onKeyDown: e => {\n                        let currentItem;\n                        if (!isAutocompleteOpen) {\n                            this._showAC();\n                        }\n\n                        // Arrow down\n                        if (e.which === 40) {\n                            if (selectedIndex < items.length - 1) {\n                                e.preventDefault();\n                                this.setState({selectedIndex: selectedIndex + 1});\n                            }\n                        }\n\n                        // Arrow up\n                        if (e.which === 38) {\n                            if (selectedIndex > 0) {\n                                e.preventDefault();\n                                this.setState({selectedIndex: selectedIndex - 1});\n                            }\n                            if (selectedIndex < 0) {\n                                e.preventDefault();\n                                this.setState({selectedIndex: items.length - 1});\n                            }\n                        }\n\n                        // Enter\n                        if (e.which === 13) {\n                            if (selectedIndex >= 0 || selectedIndex < items.length) {\n                                currentItem = items[selectedIndex];\n                                this._select(currentItem)\n                            }\n                        }\n\n                        // Escape\n                        if (e.which === 27) {\n                            this._hideAC();\n                        }\n\n                        onKeyDown(e);\n                    },\n                    onMouseDown: e => {\n                        if (!isAutocompleteOpen) {\n                            this._showAC();\n                        }\n                        onMouseDown(e);\n                    },\n                })}\n                {isAutocompleteOpen ? this.renderAutocomplete({\n                    items,\n                    selectedIndex,\n                    renderItem: this.renderAutocompleteItem,\n                    value,\n                    getItemText: this.getSuggestionText,\n                    onSelect: this._select,\n                }) : null}\n            </div>\n        );\n    }\n}\nSelect.defaultProps = {\n    value: '',\n    onSelect: () => {},\n    onFocus: () => {},\n    onBlur: () => {},\n    onChange: () => {},\n    onKeyDown: () => {},\n    onMouseDown: () => {},\n    onError: () => {},\n};\nexport default Select;\n","import React from 'react';\n\nexport default (props = {}) => {\n    return (\n        <input {...{\n            type: 'text',\n            ...props,\n            autoComplete: 'off',\n        }} />\n    )\n};\n","export default (arr, fn, out = []) => {\n    for (let i = 0; i < arr.length; i++){\n        out[i] = fn(arr[i], i, arr);\n    }\n    return out;\n};\n","import React from 'react';\nimport map from './map';\n\nexport default ({\n    items = [],\n    selectedIndex = -1,\n    getItemText = i => i,\n    renderItem = i => i,\n    onSelect = () => {},\n    ...rest,\n}) => items.length ? (\n    <div {...{...rest, className: 'react-dadata__suggestions'}}>\n        {map(items, (item, key) =>\n            renderItem({\n                key,\n                onMouseDown: () => onSelect(item),\n                selectedIndex,\n                value: getItemText(item),\n            })\n        )}\n    </div>\n) : null ;\n","import React from 'react';\n\nexport default (props = {}) => {\n    let {\n        value = '',\n        key = null,\n        selectedIndex = -1,\n        ...rest,\n    } = props;\n    return (\n        <div {...{\n            key,\n            ...rest,\n            className: `\n                    react-dadata__suggestion ${selectedIndex ? '' : 'react-dadata__suggestion--first'}\n                    ${key !== selectedIndex ? '' : 'react-dadata__suggestion--current'}\n                `,\n        }} >\n            {value}\n        </div>\n    );\n};\n","import Select from './Select';\nimport TextInput from './TextInput';\nimport List from './List';\nimport ListItem from './ListItem';\nexport default {\n    Select,\n    TextInput,\n    List,\n    ListItem\n}\n"],"names":["Select","state","props","value","search","Promise","resolve","text","getSuggestionText","item","getSuggestionValue","_showAC","setState","isAutocompleteOpen","_hideAC","_select","onSelect","onFocus","onBlur","onChange","onKeyDown","onMouseDown","onError","rest","items","selectedIndex","React","renderInput","e","target","then","catch","currentItem","which","length","preventDefault","renderAutocomplete","renderAutocompleteItem","Component","defaultProps","arr","fn","out","i","getItemText","renderItem","className","key"],"mappings":"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"}